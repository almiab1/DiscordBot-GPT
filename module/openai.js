// ------------------------------------------------------------------
// Imports
// ------------------------------------------------------------------
require('dotenv').config();
const { OpenAI } =  require("openai");
// ------------------------------------------------------------------

// ------------------------------------------------------------------
// OpenAI configuration
// ------------------------------------------------------------------
const openai = new OpenAI(process.env.OPENAI_API_KEY);
// ------------------------------------------------------------------

// ------------------------------------------------------------------
// GPT MODELS DICTIONARY
// ------------------------------------------------------------------
const gptModels = {
    gpt3: "gpt-3.5-turbo",
    gpt3pro: "gpt-3.5-turbo-16k",
    gpt4: "gpt-4",
}
// ------------------------------------------------------------------

// ------------------------------------------------------------------
// Functinons
// ------------------------------------------------------------------
const getResponse = async (context, gradeLiberty=0.5) => {
    const res = await openai.chat.completions.create({
        model: gptModels[process.env.GPT_MODEL] || "gpt-3.5-turbo",
        messages: context,
        temperature: gradeLiberty,
    }).catch((error) => console.log(error)); 

    return res;
}
// ------------------------------------------------------------------

// ------------------------------------------------------------------
// Exports
// ------------------------------------------------------------------
module.exports = {
    getResponse,
}
// ------------------------------------------------------------------